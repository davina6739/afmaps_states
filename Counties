<html>
  <head>
      <div id="container" style="height: 520px; min-width: 310px; width: 800px; margin: 0 auto; text-align:center; line-height: 520px">
    Downloading map...
      </div>

      <script src="https://code.highcharts.com/maps/highmaps.js"></script>
      <script src="https://code.highcharts.com/maps/modules/data.js"></script>
      <script src="https://code.highcharts.com/maps/modules/exporting.js"></script>
      <script src="https://code.highcharts.com/mapdata/countries/us/us-all-all.js"></script>
  </head>
  <body>
      <script>
      function drawMap () {
      
        Highcharts.data({
          googleSpreadsheetKey: '1_fCapX5c05X5tDaeWQA59lbKL2fERePGQIEScXh4Xww',
          firstRowAsNames: true,
      
          function(data) {
      
            var countiesMap = Highcharts.geojson(Highcharts.maps['countries/us/us-all-all']),
                  lines = Highcharts.geojson(Highcharts.maps['countries/us/us-all-all'], 'mapline'),
      
            var code: hc - key,
                name: columns[1],
                value: columns[2],
                
              };
      
              options = {
                  chart: {
                      borderWidth: 1,
                      marginRight: 50 // for the legend
                  },
      
                  title: {
                      text: 'US Counties unemployment rates, April 2015'
                  },
      
                  legend: {
                      title: {
                          text: 'Unemployment<br>rate',
                          style: {
                              color: (Highcharts.theme && Highcharts.theme.textColor) || 'black'
                          }
                      },
                      layout: 'vertical',
                      align: 'right',
                      floating: true,
                      valueDecimals: 0,
                      valueSuffix: '%',
                      backgroundColor: (Highcharts.theme && Highcharts.theme.legendBackgroundColor) || 'rgba(255, 255, 255, 0.85)',
                      symbolRadius: 0,
                      symbolHeight: 14
                  },
      
                  mapNavigation: {
                      enabled: true
                  },
      
                  colorAxis: {},
      
                  plotOptions: {
                      mapline: {
                          showInLegend: false,
                          enableMouseTracking: false
                      }
                  },
      
                  series: [{
                      mapData: countiesMap,
                      data: data,
                      joinBy: ['hc-key', 'code'],
                      name: 'Unemployment rate',
                      tooltip: {
                          valueSuffix: '%'
                      },
                      borderWidth: 0.5,
                      states: {
                          hover: {
                              color: '#bada55'
                          }
                      }
                  }, {
                      type: 'mapline',
                      name: 'State borders',
                      data: [lines[0]],
                      color: 'white'
                  }, {
                      type: 'mapline',
                      name: 'Separator',
                      data: [lines[1]],
                      color: 'gray'
                  }]
              };
      
              // Instanciate the map
              $('#container').highcharts('Map', options);
          });
      }
      drawMap ();
    </script>
  </body>
</html>
